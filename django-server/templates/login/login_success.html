<!-- templates/login/login_success.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¡œê·¸ì¸ ì„±ê³µ</title>
</head>
<body>
  <h1>ë¡œê·¸ì¸ ì¤‘ì…ë‹ˆë‹¤...</h1>

  <!-- âœ… ì—¬ê¸°ì—ì„œëŠ” í•„í„°ë§Œ ì‚¬ìš© -->
  {{ request.session.jwt|json_script:"jwt-data" }}

  <script>
    try {
      const token = JSON.parse(document.getElementById('jwt-data').textContent);
      if (token.access && token.refresh) {
        localStorage.setItem("accessToken", token.access);
        localStorage.setItem("refreshToken", token.refresh);
        console.log("âœ… JWT ì €ì¥ ì™„ë£Œ");
      } else {
        console.warn("âš ï¸ í† í°ì´ ì—†ìŠµë‹ˆë‹¤.");
      }
    } catch (e) {
      console.error("ğŸš¨ í† í° íŒŒì‹± ì¤‘ ì˜¤ë¥˜:", e);
    }

    // í™ˆìœ¼ë¡œ ì´ë™
    window.location.href = "/";
  </script>
</body>
</html>
